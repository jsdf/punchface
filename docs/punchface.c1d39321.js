parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"rrZw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){this.x=0,this.y=0,this.z=0,t&&(this.x=t.x,this.y=t.y,this.z=t.z)}return t.prototype.origin=function(){this.x=0,this.y=0,this.z=0},t.prototype.init=function(t,i,s){this.x=t,this.y=i,this.z=s},t.prototype.clone=function(){return new t(this)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},t.prototype.normalise=function(){if(0===this.x&&0===this.y&&0===this.z)return this;var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return this.x/=t,this.y/=t,this.z/=t,this},t.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this.z+=t,this},t.prototype.subScalar=function(t){return this.x-=t,this.y-=t,this.z-=t,this},t.prototype.mulScalar=function(t){return this.x*=t,this.y*=t,this.z*=t,this},t.prototype.divScalar=function(t){return this.x/=t,this.y/=t,this.z/=t,this},t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)+Math.pow(this.z-t.z,2))},t.prototype.directionTo=function(i){return new t(i).sub(this).normalise()},t.prototype.toJSON=function(){return{x:this.x,y:this.y,z:this.z}},t.prototype.toString=function(){return"{x:"+this.x.toFixed(2)+", y:"+this.y.toFixed(2)+", z:"+this.z.toFixed(2)+"}"},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},t}();exports.Vec3d=t;
},{}],"uSNF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Vec3d"),e=0,o=function(){function o(){this.position=new t.Vec3d,this.id=e++}return o.prototype.update=function(t){},o.prototype.render=function(t,e){},o.prototype.renderDebug=function(t,e){var o=t.getScreenPos(this);e.font="8px Lucida Grande",e.fillStyle="black",e.fillText(this.toString()+" "+this.position.toString(),o.x,o.y)},o.prototype.toString=function(){return"{"+this.constructor.name+":"+this.id+"}"},o}();exports.GameObject=o;
},{"./Vec3d":"rrZw"}],"z0VK":[function(require,module,exports) {
module.exports="/punchface/walk1.e46eecdd.png";
},{}],"tcX5":[function(require,module,exports) {
module.exports="/punchface/walk2.c0a183d8.png";
},{}],"hRh1":[function(require,module,exports) {
module.exports="/punchface/walk3.222dac54.png";
},{}],"RY0n":[function(require,module,exports) {
module.exports="/punchface/walk4.12054129.png";
},{}],"OiO6":[function(require,module,exports) {
module.exports="/punchface/idle1.f6f85709.png";
},{}],"OMCs":[function(require,module,exports) {
module.exports="/punchface/idle2.c879b102.png";
},{}],"s4jY":[function(require,module,exports) {
module.exports="/punchface/idle3.d0807f0e.png";
},{}],"Ivyb":[function(require,module,exports) {
module.exports="/punchface/idle4.fe3e8a5c.png";
},{}],"SLDe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.images={walk1:require("./assets/walk1.png"),walk2:require("./assets/walk2.png"),walk3:require("./assets/walk3.png"),walk4:require("./assets/walk4.png"),idle1:require("./assets/idle1.png"),idle2:require("./assets/idle2.png"),idle3:require("./assets/idle3.png"),idle4:require("./assets/idle4.png")},exports.idleAnim=[exports.images.idle1,exports.images.idle2,exports.images.idle3,exports.images.idle4],exports.walkAnim=[exports.images.walk1,exports.images.walk2,exports.images.walk3,exports.images.walk4];
},{"./assets/walk1.png":"z0VK","./assets/walk2.png":"tcX5","./assets/walk3.png":"hRh1","./assets/walk4.png":"RY0n","./assets/idle1.png":"OiO6","./assets/idle2.png":"OMCs","./assets/idle3.png":"s4jY","./assets/idle4.png":"Ivyb"}],"gTgb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Vec3d"),i=1/60,e=4,o=-300,s=0,c=function(){function i(i){this.id=s++,this.enabled=!0,this.prevPosition=new t.Vec3d,this.velocity=new t.Vec3d,this.nonIntegralVelocity=new t.Vec3d,this.acceleration=new t.Vec3d,this.nonIntegralAcceleration=new t.Vec3d,this.prevAcceleration=new t.Vec3d,this.obj=i.obj,this.mass=i.mass,this.massInverse=1/i.mass,this.radius=i.radius,this.radiusSquared=Math.pow(i.radius,2)}return Object.defineProperty(i.prototype,"position",{get:function(){return this.obj.position},enumerable:!0,configurable:!0}),i.prototype.integrateMotionSemiImplicitEuler=function(i,e){var o=new t.Vec3d;this.acceleration.mulScalar(this.massInverse),this.nonIntegralAcceleration=this.acceleration,this.acceleration.mulScalar(i),this.nonIntegralVelocity.add(this.acceleration),this.velocity.copyFrom(this.nonIntegralVelocity),this.velocity.mulScalar(i),this.velocity.mulScalar(e),o.copyFrom(this.position),o.add(this.velocity),this.prevPosition.copyFrom(this.position),this.position.copyFrom(o),this.prevAcceleration.copyFrom(this.acceleration),this.acceleration.origin()},i.prototype.update=function(){var i=new t.Vec3d({x:0,y:o*this.mass,z:0});this.applyForce(i)},i.prototype.applyForce=function(t){this.acceleration.add(t)},i.prototype.toString=function(){return"{"+this.constructor.name+":"+this.id+"}"},i}();function n(t,i){t.position.y-t.radius<i&&(t.position.y=i+t.radius,t.nonIntegralVelocity.y=0)}exports.PhysBody=c;var a=function(){function t(){this.accumulatedTime=0,this.clock=0,this.viscosity=.01,this.simulationRate=1,this.timeScale=1,this.dynamicTimestep=!0,this.bodies=[],this.floorHeight=-100}return t.prototype.integrateBodies=function(t,i){for(var e=0,o=this.bodies;e<o.length;e++){(h=o[e]).enabled&&h.update(t,i)}for(var s=0,c=this.bodies;s<c.length;s++){(h=c[s]).enabled&&h.integrateMotionSemiImplicitEuler(t,i)}for(var a=0,r=this.bodies;a<r.length;a++){var h;n(h=r[a],this.floorHeight)}},t.prototype.step=function(t){var o,s,c,n;if(0==this.clock&&(this.clock=t),o=t,(c=(o=this.dynamicTimestep?o:this.clock+16.667*this.timeScale*this.simulationRate)-this.clock)>0){c*=.001,n=1-this.viscosity,this.clock=o,this.accumulatedTime<1?this.accumulatedTime=this.accumulatedTime+c:console.log("physics: accumulated too much time, not accumulating any more\n");var a=0;for(s=i*this.timeScale;this.accumulatedTime>=s&&a<e;){this.integrateBodies(s,n),this.accumulatedTime=this.accumulatedTime-s,a++;break}}},t}();exports.Physics=a;
},{"./Vec3d":"rrZw"}],"UnXq":[function(require,module,exports) {
"use strict";function e(){var e=document.getElementById("viewport");if(!(e instanceof HTMLCanvasElement))throw new Error("die");return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImage=function(){var e=new Map;return function(r){if(""!==r){var n=e.get(r);if(n)return n.image;var t={image:null},o=new Image;return o.onload=function(){t.image=o},o.onerror=function(){throw new Error("failed to load "+r)},o.src=r,e.set(r,t),null}}}(),exports.getCanvas=e;
},{}],"lbff":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),e=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./GameObject"),i=require("./assets"),n=require("./Vec3d"),o=require("./Physics"),s=e(require("./utils")),a=1,u=function(e){function r(){var t=e.call(this)||this;return t.anim=i.idleAnim,t.physBody=new o.PhysBody({obj:t,mass:200,radius:50}),t.position.y=-600,t}return t(r,e),r.prototype.isOnGround=function(t){return this.physBody.position.y-this.physBody.radius<=t.physics.floorHeight+.001},r.prototype.update=function(t){var e=t.input.direction.clone();e.mulScalar(a);var r=this.isOnGround(t);r||(e.z=0),this.position.add(e),t.input.jump&&r&&this.physBody.applyForce(new n.Vec3d({x:0,y:1e4,z:0}).mulScalar(this.physBody.mass)),t.input.direction.magnitude()>0&&r?this.anim=i.walkAnim:this.anim=i.idleAnim},r.prototype.render=function(t,e){var r=s.getImage(this.anim[t.frameNumber%this.anim.length]),i=t.getScreenPos(this);r&&e.drawImage(r,i.x,i.y)},r}(r.GameObject);exports.Player=u;
},{"./GameObject":"uSNF","./assets":"SLDe","./Vec3d":"rrZw","./Physics":"gTgb","./utils":"UnXq"}],"tde3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Vec3d"),t=function(){function t(){this.keysDown=new Set,this.keysTriggered=new Set,this.direction=new e.Vec3d,this.jump=!1}return t.prototype.onKeyDown=function(e){console.log("onKeyDown",e),this.keysDown.add(e),this.keysTriggered.add(e)},t.prototype.onKeyUp=function(e){this.keysDown.delete(e),this.keysTriggered.delete(e)},t.prototype.update=function(){this.direction.origin(),this.jump=!1,this.keysDown.has("d")&&(this.direction.x+=1),this.keysDown.has("a")&&(this.direction.x+=-1),this.keysDown.has("w")&&(this.direction.z+=1),this.keysDown.has("s")&&(this.direction.z+=-1),this.keysTriggered.has("c")&&(this.jump=!0),this.keysTriggered.clear()},t}();exports.Input=t;
},{"./Vec3d":"rrZw"}],"jKSw":[function(require,module,exports) {
"use strict";var t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Player"),r=t(require("./utils")),i=require("./Input"),s=require("./Physics"),n=50,o=r.getCanvas(),a=function(){function t(){this.realFrameNumber=0,this.frameNumber=0,this.input=new i.Input,this.player=new e.Player,this.physics=new s.Physics,this.worldObjects=[this.player],this.physics.bodies.push(this.player.physBody)}return t.prototype.update=function(){var t=this,e=performance.now();this.input.update(),this.worldObjects.forEach(function(e){return e.update(t)}),this.physics.step(e)},t.prototype.render=function(){var t=this,e=o.getContext("2d");this.realFrameNumber++,this.realFrameNumber%4==0&&(e.fillStyle="white",e.fillRect(0,0,o.width,o.height),this.frameNumber++,this.worldObjects.forEach(function(r){return r.render(t,e)}),debug.textContent=JSON.stringify({pos:this.player.physBody.position,vel:this.player.physBody.nonIntegralVelocity,acc:this.player.physBody.nonIntegralAcceleration},null,2))},t.prototype.getScreenPos=function(t){return{x:Math.floor(t.position.x),y:-Math.floor(t.position.y+t.position.z/2)}},t}();exports.Game=a;
},{"./Player":"lbff","./utils":"UnXq","./Input":"tde3","./Physics":"gTgb"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Game"),n=require("./assets"),r=e(require("./utils"));Object.entries(n.images).forEach(function(e){e[0];var t=e[1];return r.getImage(t)});var i=new t.Game;function u(){requestAnimationFrame(function(){i.update(),i.render(),u()})}window.game=i,document.addEventListener("keydown",function(e){e.repeat||i.input.onKeyDown(e.key)}),document.addEventListener("keyup",function(e){i.input.onKeyUp(e.key)}),u();
},{"./Game":"jKSw","./assets":"SLDe","./utils":"UnXq"}]},{},["QCba"], null)
//# sourceMappingURL=/punchface/punchface.c1d39321.js.map